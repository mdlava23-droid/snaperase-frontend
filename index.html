<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Snaperase â€” Free 3D Background Remover</title>

<!-- SEO -->
<meta name="description" content="Snaperase â€” Free AI Background Remover | High Quality | Instant Result | 3D Liquid Glass UI" />
<meta name="keywords" content="snaperase, background remover, free bg remove, ai remove background, photo editor" />

<!-- OG Preview -->
<meta property="og:title" content="Snaperase â€” Free Background Remover">
<meta property="og:description" content="Upload â†’ Remove Background â†’ Download â€” 100% Free">
<meta property="og:type" content="website">
<meta property="og:image" content="https://snaperase.pro/preview.jpg">
<meta property="og:url" content="https://snaperase.pro">

<!-- Favicon -->
<link rel="icon" href="https://snaperase.pro/icon.png" />

<style>
body{
  margin:0;background:#060606;font-family:Inter,system-ui;color:#fff;
  display:flex;justify-content:center;align-items:center;min-height:100vh;
}
.wrapper{
  max-width:980px;width:100%;padding:22px;
  background:linear-gradient(145deg,#ffffff18,#ffffff05);
  border:1px solid #ffffff25;border-radius:22px;
  backdrop-filter:blur(18px);
  box-shadow:0 40px 140px #00eaff25,inset 0 0 40px #ffffff15;
}

.brand-anim{
  text-align:center;font-size:34px;font-weight:900;
  letter-spacing:.5px;margin-bottom:10px;
  background:linear-gradient(90deg,#6cf,#9ff);
  -webkit-background-clip:text;color:transparent;
  animation:pulse 3s ease-in-out infinite;
}
@keyframes pulse{
  0%{text-shadow:0 0 10px #6cf}
  50%{text-shadow:0 0 30px #9ff}
  100%{text-shadow:0 0 10px #6cf}
}

.sub{text-align:center;opacity:.85;margin-bottom:18px}

.grid{display:grid;grid-template-columns:1fr 1fr;gap:18px;margin-top:12px}
.card{
  border:1px solid #ffffff22;border-radius:16px;padding:12px;
  background:linear-gradient(160deg,#ffffff12,#ffffff03);
}
.frame{
  aspect-ratio:1/1;border-radius:14px;overflow:hidden;
  background:#00000060;display:flex;justify-content:center;align-items:center;
  position:relative;transform-style:preserve-3d;
  animation:spin 12s linear infinite;
}
@keyframes spin{from{transform:rotateY(0)}to{transform:rotateY(360deg)}}
.frame img{max-width:100%;max-height:100%}
.btn{
  margin-top:10px;padding:10px 14px;border-radius:10px;border:0;
  background:#00e5ff;font-weight:700;cursor:pointer
}
.btn:disabled{opacity:.4}
.loader{display:none;margin-top:6px;font-size:13px;opacity:.85}

.notice{
  margin-top:10px;font-size:12px;border:1px solid #ffb30055;
  padding:8px;border-radius:10px;background:#ffb30010;display:none
}
.footer{margin-top:16px;font-size:12px;text-align:center;opacity:.9}
.footer strong{opacity:1}
</style>
</head>

<body>
<div class="wrapper">
  <div class="brand-anim">SNAPERASE â€” 3D Liquid-Glass Background Remover</div>
  <div class="sub">Fully Free â€¢ High Quality â€¢ Instant Result</div>

  <input id="fileInput" type="file" accept="image/*" />

  <div class="grid">
    <div class="card">
      <h3>Before</h3>
      <div class="frame"><img id="beforeImg"></div>
    </div>

    <div class="card">
      <h3>After</h3>
      <div class="frame"><img id="afterImg"></div>
      <button id="downloadBtn" class="btn" disabled>Download PNG</button>
      <div id="loader" class="loader">Processingâ€¦ please wait</div>
      <div id="rateNotice" class="notice">
        Too many requests â€” try again in a few seconds.
      </div>
    </div>
  </div>

  <div class="footer">
    <strong>snaperase</strong> â€¢ Contact: +8801410802088 â€¢ Rampura, Dhaka<br>
    Manager: MD. RAYHAN ISLAM BAPPY
  </div>
</div>

<script>
const API_URL = "https://snaperase-backend.onrender.com/remove-bg";
const fileInput = document.getElementById("fileInput");
const beforeImg = document.getElementById("beforeImg");
const afterImg = document.getElementById("afterImg");
const loader = document.getElementById("loader");
const downloadBtn = document.getElementById("downloadBtn");
const rateNotice = document.getElementById("rateNotice");

// ðŸ”¹ Compress image before upload
function compressImage(file, maxSizeKB = 900){
  return new Promise(res=>{
    const img = new Image();
    img.onload = ()=>{
      const canvas = document.createElement("canvas");
      const scale = Math.sqrt((maxSizeKB*1024)/(file.size));
      canvas.width = img.width*scale;
      canvas.height = img.height*scale;
      const ctx = canvas.getContext("2d");
      ctx.drawImage(img,0,0,canvas.width,canvas.height);
      canvas.toBlob(b=>res(b),"image/jpeg",0.9);
    };
    img.src = URL.createObjectURL(file);
  });
}

fileInput.addEventListener("change", async e=>{
  const file = e.target.files[0];
  if(!file) return;

  beforeImg.src = URL.createObjectURL(file);
  afterImg.src = "";
  downloadBtn.disabled = true;
  rateNotice.style.display="none";

  loader.style.display="block";

  try{
    // compress first
    const compressed = await compressImage(file);

    const form = new FormData();
    form.append("file", compressed); // change name if API requires

    const res = await fetch(API_URL,{method:"POST",body:form});

    // ðŸ”¹ Error boundary + rate-limit detect
    if(res.status === 429){
      rateNotice.style.display="block";
      throw new Error("Rate limit");
    }
    if(!res.ok) throw new Error("API error");

    const blob = await res.blob();
    const url = URL.createObjectURL(blob);
    afterImg.src = url;
    downloadBtn.disabled = false;

    downloadBtn.onclick = ()=>{
      const a=document.createElement("a");
      a.href = url;
      a.download = "snaperase-output.png";
      a.click();
    };

  }catch(err){
    alert("Processing failed. Please try again.");
    console.error(err);
  }finally{
    loader.style.display="none";
  }
});
</script>
</body>
</html>
